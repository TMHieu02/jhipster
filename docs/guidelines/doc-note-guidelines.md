# Note Guidelines: Testing APIs, Running, and Using the Web Application

## 1. Document Objectives
- Standardize the steps for preparing environments, running the system, and validating baseline behaviors.
- Provide a quick checklist for manual API testing.
- Serve as onboarding material for new teammates to reduce tribal knowledge.

## 2. Setting Up the Development Environment
- **Prerequisites**: JDK 17, Node.js 18+, npm 9+, Maven Wrapper (`mvnw`), npm Wrapper (`npmw`), Docker Desktop (for auxiliary services).
- **Environment variables**: ensure `JAVA_HOME` points to JDK 17 and is added to `PATH`.
- **Install dependencies**:
  - Backend: use the Maven Wrapper; no global Maven installation required.
  - Frontend: run `npmw install` (or `npm install`) at the project root.
- **Smoke check**: run `./mvnw -v` and `./npmw -v` to confirm the wrappers function.

## 3. Starting the Web Application
- **Backend (Spring Boot)**
  - Dev profile: `./mvnw` (Linux/macOS) or `mvnw.cmd` (Windows). Application listens at `http://localhost:8080`.
  - Prod-like: `./mvnw -Pprod` to build and run with production optimizations.
  - Docker: `docker compose -f src/main/docker/app.yml up -d` to spin up the full stack (MongoDB, gateway, etc.).
- **Frontend (React + Vite/Webpack depending on JHipster profile)**
  - Dev server: `./npmw start` (Linux/macOS) or `npmw.cmd start` (Windows). Defaults to `http://localhost:9000` and proxies APIs to `8080`.
  - Production build: `./npmw run build`.
- **Keeping backend and frontend in sync**
  - Start the backend first so the dev server can proxy requests.
  - Health check: `http://localhost:8080/management/health` (requires an admin token).

## 4. Basic Web Usage Guide
- **Default credentials**
  - Administrator: `admin` / `admin`
  - Regular user: `user` / `user`
  - Additional accounts can be configured in `src/main/resources/config/application-dev.yml`.
- **Quick regression flow**
  - Login with the admin account.
  - Visit `Administration` → `User management` to create or edit a user.
  - Login with the newly created user to verify role-based UI.
  - Visit `Entities` (generated by JHipster) to confirm CRUD operations.
- **Support references**
  - Error messages and translations: `src/main/webapp/i18n`.
  - For 401 issues, review the token saved in Local Storage or session storage.

### 4.1 Core Frontend Features
- **Dashboard / Home**
  - Validate summary widgets and charts; ensure figures match `/api/administration/metrics` (if enabled).
  - Confirm notifications (toast/banner) appear when backend returns alerts.
- **Personal account management**
  - `Account` → `Settings`: update name and email, then refresh to ensure persistence.
  - `Account` → `Password`: change password, verifying minimum length and confirmation validation.
  - `Account` → `Sessions`: if enabled, confirm remote session invalidation works.
- **User administration**
  - `Administration` → `User management`: check pagination, search by login/email, and status filtering.
  - Create: fill mandatory fields, assign roles (`ROLE_ADMIN`, `ROLE_USER`), trigger activation email if SMTP is configured.
  - Edit: change roles, activate/deactivate users; observe calls to `/api/admin/users/{login}`.
  - Delete: confirm the entry disappears and the API responds with 204.
- **System administration**
  - `Administration` → `Metrics`: inspect CPU/JVM/DB charts; download thread dump JSON.
  - `Administration` → `Health`: click `Check` and cross-reference `/management/health`.
  - `Administration` → `Configuration`: search for properties and match data with `/management/configprops`.
  - `Administration` → `Logs`: change log levels and confirm backend logs reflect the change.
- **Entity management**
  - List: test pagination, column sorting, and filtering.
  - Create: submit forms, verify client validation (required, pattern) and server validation (error messages).
  - View: confirm `/entity/:id/view` renders detailed information.
  - Edit: modify fields and ensure optimistic locking works if a `version` field exists.
  - Delete: confirm modal prompts and list refresh after success.
  - Relationships: validate dropdowns for many-to-one/many-to-many associations load the correct data.
- **Notifications & localization**
  - Ensure toast/snackbar notifications appear after CRUD actions.
  - Switch language via the language selector (top-right) and verify labels map to `i18n/*.json`.
- **UI authorization**
  - Login as `ROLE_USER`: confirm admin screens are hidden.
  - Login as `ROLE_ADMIN`: confirm admin menus appear.
  - When tokens expire (idle tab), subsequent actions should redirect to the login screen.
- **Support references**
  - Error messages and translations: `src/main/webapp/i18n`.
  - For 401 issues, review the token saved in Local Storage or session storage.

### 4.2 Product Management
- **Access**: header menu `Product Management` (box icon) visible only after authentication.
- **List dashboard**
  - Four statistic cards: total products, active products, average price, low stock count (`lowStockCount`).
  - Table columns include sequential index, name, description, price (USD), stock (warning badge when < 10), category, status, created date.
- **Search & filters**
  - Toggle `Filters` to reveal the form.
  - Fields: `Name`, `Category` (active categories only), `Status` (Active/Inactive), `Min/Max Price`.
  - `Search` enables search mode; `Clear` resets filters and reloads all items.
- **Bulk actions**
  - Select all items on the current page with the header checkbox.
  - `Delete (n)` removes multiple products after confirmation.
  - `Export` downloads data as `TXT` or `XLSX`.
- **Inline editing**
  - `Edit` per row allows quick updates to name, description, price, stock quantity, category, and status.
  - `Save` triggers a `PUT` request; verify success toast. `Cancel` reverts changes.
- **Deletion & refresh**
  - Row-level `Delete` prompts with product name.
  - `Refresh` reloads the list and statistics.
- **Detail page**
  - Sections: `Overview` (with link to category) and `Metadata` (audit info), plus an `Image URL` preview card.
  - Header badge shows Active/Inactive status.
- **Create / Edit**
  - Entry points: `Create new Product` or `/product-management/:id/edit`.
  - Required: `Name` (≤ 100 chars), `Price` (≥ 0), `Stock Quantity` (≥ 0).
  - Optional: `Description` (≤ 500), `Category` (active categories only), `Image URL` (≤ 255), `Active` (default true).
  - On success, navigate back to the list.

### 4.3 Customer Management
- **Access**: `Entities` → `Customer`.
- **List dashboard**
  - Statistics: total customers, active customers, inactive customers, unique cities.
  - Table shows first/last name, email (mailto link), phone, city, status badge.
- **Search & filters**
  - Fields: `Name`, `Email`, `City`, `Country`, `Status`.
  - `Search` only fires when a filter is provided; `Clear` returns to the default list.
- **Bulk & refresh actions**
  - Use header checkbox and `Delete (n)` for bulk removal.
  - `Refresh List` reloads entities and statistics.
- **Inline editing**
  - `Edit` per row updates first/last name, email, phone, city, active flag.
  - `Save` issues a `PUT`; verify toast and updated metrics.
- **Delete / navigation**
  - Row `Delete` confirms before calling the API.
  - `View` opens `/customer/:id` with `Profile`, `Address`, `Metadata` sections.
- **Create / Edit**
  - Required: `First name`, `Last name`, `Email`.
  - Optional: `Phone` (≤ 20 chars), `Address` (≤ 255), `City` (≤ 100), `Country` (≤ 50), `Active` (default true).
  - After save, return to the list.
- **Additional checks**
  - Confirm `mailto:` and `tel:` links work.
  - Status badges change color with active/inactive values.

### 4.4 Order Management
- **Access**: `Entities` → `Order`.
- **List dashboard**
  - Statistics: total orders, completed orders, pending orders, total revenue (USD).
  - Table displays customer, order date (`APP_DATE_FORMAT`), total amount, status badge, payment method.
- **Search & filters**
  - Fields: `Customer ID`, `Status` (PENDING/PROCESSING/COMPLETED/CANCELLED/SHIPPED), `Payment Method`, `Start/End Date`, `Min/Max Total`.
  - `Search` applies filters; `Clear` resets to default.
- **Actions & inline editing**
  - Header checkbox + `Delete (n)` for batch actions.
  - Inline edit fields: `customerId`, `orderDate`, `totalAmount`, `status`, `paymentMethod`. `Save` normalizes `totalAmount` and `orderDate`.
  - `Refresh List` reloads data and statistics.
- **Detail page**
  - Header badge reflects status color.
  - Sections: `Summary` (customer link, date, total), `Fulfillment` (shipping address, payment method, notes), `Metadata`.
- **Create / Edit**
  - Customer dropdown loads active customers (`customer.reducer`).
  - Defaults: `orderDate` = today, `status` = `PENDING`.
  - Required: `Customer`, `Order Date`, `Total Amount` (≥ 0), `Status`.
  - Optional: `Shipping Address` (≤ 500), `Payment Method` (≤ 100), `Notes` (≤ 500).
  - On success, redirect to `/order`.
- **Link validation**
  - From the list, clicking the customer name opens the customer detail page.
  - Status badges map to colors (Pending=warning, Processing=info, Completed=success, Cancelled=danger, default=secondary).

### 4.5 Category Management
- **Access**: `Entities` → `Category`.
- **List dashboard**
  - Statistics: total categories, active categories, inactive categories, categories with images (`categoriesWithImage`).
  - Table columns: `Name`, `Slug`, `Description`, status badge, created date, selection checkbox.
- **Search & filters**
  - Fields: `Name`, `Slug`, `Status` (Active/Inactive).
  - `Search` enables filter mode; `Clear` resets to the full list.
- **Actions & editing**
  - Header checkbox + `Delete (n)` for bulk removal with confirmation.
  - Inline `Edit` updates `name`, `slug`, `description`, `active`. `Save` sends a `PUT`; `Cancel` restores original values.
  - `Refresh` reloads the list and statistics.
- **Detail page**
  - Header badge shows Active/Inactive; `Image URL` section renders a preview when available.
  - `Metadata` section surfaces audit fields (created/modified by/date).
- **Create / Edit**
  - Required: `Name` (≤ 100 chars).
  - Optional: `Slug` (≤ 50 chars, used for URLs/filters), `Description` (≤ 500), `Image URL` (≤ 255), `Active` (default true).
  - After save, redirect to `/category`.
- **Product linkage**
  - Product lists only show active categories in dropdowns and filters.
  - When testing product CRUD flows, ensure at least one active category exists to populate the dropdown.

## 5. API Testing Guide
- **Swagger UI**
  - Visit `http://localhost:8080/swagger-ui/index.html`.
  - Click `Authorize` with a Bearer token (taken from the web app or `/api/authenticate`).
- **Postman / Insomnia**
  - Import Swagger JSON from `http://localhost:8080/v3/api-docs`.
  - Organize a collection with two folders: `Public` (no auth) and `Secured` (requires token).
  - Obtain JWT token:
    - POST `/api/authenticate` with `{ "username": "admin", "password": "admin", "rememberMe": true }`.
    - Store the returned `id_token` in the environment for reuse.
- **Minimum manual coverage**
  - Authentication: `/api/authenticate`, `/api/account`.
  - Administration: `/api/admin/users`, `/api/admin/audits`.
  - Core entities: CRUD flows (GET all, GET detail, POST, PUT/PATCH, DELETE) with sample payloads.
  - Monitoring: `/management/health`, `/management/info`.
- **Automated testing**
  - Backend: `./mvnw verify` (unit + integration tests).
  - Frontend: `./npmw run test`.
  - End-to-end (if Cypress is configured): `./npmw run e2e`.

## 6. Notes and Recommendations
- Enable `DEBUG` log level when troubleshooting: adjust `src/main/resources/logback-spring.xml`.
- After changing APIs, regenerate Swagger by running `./mvnw compile`.
- Prioritize integration tests for critical APIs under `src/test/java`.
- After each test run, log outcomes (pass/fail), data used, and relevant logs in your test management system or in `docs/testing-quality.md`.

## 7. Points of Contact
- Project lead: add name + email here.
- DevOps/Docker engineer: add name + email.
- QA lead: add name + email.

> **Quick Checklist**  
> - [ ] Backend up at `http://localhost:8080`  
> - [ ] Frontend up at `http://localhost:9000`  
> - [ ] Admin login succeeds  
> - [ ] Sample entity CRUD verified  
> - [ ] Swagger reachable and usable  
> - [ ] Automated tests `./mvnw verify` and `./npmw run test` pass

